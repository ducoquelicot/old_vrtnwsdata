{"ast":null,"code":"import _classCallCheck from\"/Users/fmeijer/Desktop/vrtnws_data/essence/simulation/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/fmeijer/Desktop/vrtnws_data/essence/simulation/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/fmeijer/Desktop/vrtnws_data/essence/simulation/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/fmeijer/Desktop/vrtnws_data/essence/simulation/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import*as d3 from'd3';import styles from'./style';var Citizen=/*#__PURE__*/function(_React$PureComponent){_inherits(Citizen,_React$PureComponent);var _super=_createSuper(Citizen);function Citizen(props){var _this;_classCallCheck(this,Citizen);_this=_super.call(this,props);_this.references={citizen:React.createRef()};_this.state={xCoord:\"\".concat(Math.round(Math.random()*90)+5,\"%\"),yCoord:\"\".concat(Math.round(Math.random()*90)+5,\"%\")};return _this;}_createClass(Citizen,[{key:\"componentDidMount\",value:function componentDidMount(){this.animate();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){this.animate();}},{key:\"animate\",value:function animate(){switch(this.props.phase){case 1:this.animatePhase1();break;case 2:this.animatePhase2();break;default:this.animatePhase1();}}},{key:\"animatePhase1\",value:function animatePhase1(){var _this$props=this.props,duration=_this$props.duration,index=_this$props.index,skinTone=_this$props.skinTone,guilty=_this$props.guilty;var steps=4;var timePerStep=duration/steps;var delay=timePerStep*0.75*(index/100);var animationTime=timePerStep*0.25;if(skinTone==='white'){d3.select(this.references.citizen.current).style('opacity',0).transition().delay(timePerStep).transition().delay(delay).duration(animationTime).style('opacity',0.5);}if(skinTone==='black'){d3.select(this.references.citizen.current).style('opacity',0).transition().delay(timePerStep*2).transition().delay(delay).duration(animationTime).style('opacity',0.5);}if(guilty){d3.select(this.references.citizen.current).transition().delay(timePerStep*3).transition().delay(delay).duration(animationTime*2).style('stroke','#FF4262').attr('stroke-width',3).style('opacity',0.5);}d3.select(this.references.citizen.current).transition().delay(duration).duration(animationTime).style('opacity',0);}},{key:\"animatePhase2\",value:function animatePhase2(){var _this$props2=this.props,skinTone=_this$props2.skinTone,count=_this$props2.count,guilty=_this$props2.guilty;var rest=count%5;var xCoord=skinTone==='white'?\"\".concat(21+rest*5,\"%\"):\"\".concat(65+rest*5,\"%\");var yCoord=\"\".concat(Math.ceil(count/5)*5+15,\"%\");d3.select(this.references.citizen.current).style('opacity',0);if(guilty){d3.select(this.references.citizen.current).transition().delay(700*count).duration(1000).style('opacity',1).attr('cx',xCoord).attr('cy',yCoord);}}},{key:\"render\",value:function render(){var skinTone=this.props.skinTone;var _this$state=this.state,xCoord=_this$state.xCoord,yCoord=_this$state.yCoord;return/*#__PURE__*/React.createElement(\"circle\",{ref:this.references.citizen,style:styles.circle,cx:xCoord,cy:yCoord,r:\"10\",stroke:\"#16284A\",fill:skinTone==='white'?'white':'#16284A',strokeWidth:\"1\"});}}]);return Citizen;}(React.PureComponent);export{Citizen as default};","map":{"version":3,"sources":["/Users/fmeijer/Desktop/vrtnws_data/essence/simulation/frontend/src/components/Citizen/index.js"],"names":["React","d3","styles","Citizen","props","references","citizen","createRef","state","xCoord","Math","round","random","yCoord","animate","phase","animatePhase1","animatePhase2","duration","index","skinTone","guilty","steps","timePerStep","delay","animationTime","select","current","style","transition","attr","count","rest","ceil","circle","PureComponent"],"mappings":"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","sourcesContent":["import React from 'react';\nimport * as d3 from 'd3';\nimport styles from './style';\n\nexport default class Citizen extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.references = { citizen: React.createRef() };\n\n    this.state = {\n      xCoord : `${Math.round(Math.random() * 90) + 5}%`,\n      yCoord : `${Math.round(Math.random() * 90) + 5}%`\n    }\n  }\n\n  componentDidMount() {\n    this.animate();\n  }\n\n  componentDidUpdate() {\n    this.animate();\n  }\n\n  animate() {\n    switch (this.props.phase) {\n      case 1:\n        this.animatePhase1();\n        break;\n      case 2:\n        this.animatePhase2();\n        break;\n      default:\n        this.animatePhase1();\n    }\n  }\n\n  animatePhase1() {\n    const { duration, index, skinTone, guilty } = this.props;\n    const steps = 4;\n    const timePerStep = duration / steps;\n    const delay = (timePerStep * 0.75) * (index / 100);\n    const animationTime = timePerStep * 0.25;\n\n    if (skinTone === 'white') {\n      d3.select(this.references.citizen.current)\n        .style('opacity', 0)\n        .transition()\n        .delay(timePerStep)\n        .transition()\n        .delay(delay)\n        .duration(animationTime)\n        .style('opacity', 0.5);\n    }\n\n    if (skinTone === 'black') {\n      d3.select(this.references.citizen.current)\n        .style('opacity', 0)\n\n        .transition()\n        .delay(timePerStep * 2)\n        .transition()\n        .delay(delay)\n        .duration(animationTime)\n        .style('opacity', 0.5);\n    }\n\n    if (guilty) {\n      d3.select(this.references.citizen.current)\n        .transition()\n        .delay(timePerStep * 3)\n        .transition()\n        .delay(delay)\n        .duration(animationTime * 2)\n        .style('stroke', '#FF4262')\n        .attr('stroke-width', 3)\n        .style('opacity', 0.5);\n    }\n\n    d3.select(this.references.citizen.current)\n      .transition()\n      .delay(duration)\n      .duration(animationTime)\n      .style('opacity', 0)\n  }\n\n\n  animatePhase2() {\n      const { skinTone, count, guilty } = this.props;\n      const rest = count%5;\n      const xCoord = skinTone === 'white' ? `${21 + rest * 5}%` : `${65 + rest * 5}%`;\n      const yCoord = `${Math.ceil(count/5) * 5 + 15}%`;\n\n      d3.select(this.references.citizen.current)\n      .style('opacity', 0)\n      \n      if (guilty) {\n        d3.select(this.references.citizen.current)\n        .transition()\n        .delay(700 * count)\n        .duration(1000)\n        .style('opacity', 1)\n        .attr('cx', xCoord)\n        .attr('cy', yCoord)\n      }\n  }\n\n  render() {\n    const { skinTone } = this.props;\n    const { xCoord, yCoord } = this.state;\n    return (\n      <circle ref={this.references.citizen} style={styles.circle}\n        cx={xCoord}\n        cy={yCoord}\n        r=\"10\"\n        stroke=\"#16284A\"\n        fill={skinTone === 'white' ? 'white' : '#16284A'}\n        strokeWidth=\"1\"\n      />\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}