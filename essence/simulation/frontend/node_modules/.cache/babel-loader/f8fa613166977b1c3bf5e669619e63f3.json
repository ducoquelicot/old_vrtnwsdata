{"ast":null,"code":"var _jsxFileName = \"/Users/fmeijer/Desktop/vrtnws_data/essence/simulation/frontend/src/components/Citizen/index.js\";\nimport React from 'react';\nimport * as d3 from 'd3';\nimport styles from './style';\nimport { interpolateRgbBasis } from 'd3';\nexport default class Citizen extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.references = {\n      citizen: React.createRef()\n    };\n    this.state = {\n      xCoord: `${Math.round(Math.random() * 90) + 5}%`,\n      yCoord: `${Math.round(Math.random() * 90) + 5}%`\n    };\n  }\n\n  componentDidMount() {\n    this.animate();\n  }\n\n  componentDidUpdate() {\n    this.animate();\n  }\n\n  animate() {\n    switch (this.props.phase) {\n      case 1:\n        this.animatePhase1();\n        break;\n\n      case 2:\n        this.animatePhase2();\n        break;\n\n      default:\n        this.animatePhase1();\n    }\n  }\n\n  animatePhase1() {\n    const {\n      duration,\n      index,\n      skinTone,\n      guilty\n    } = this.props;\n    const steps = 4;\n    const timePerStep = duration / steps;\n    const delay = timePerStep * 0.75 * (index / 100);\n    const animationTime = timePerStep * 0.25;\n\n    if (skinTone === 'white') {\n      d3.select(this.references.citizen.current).style('opacity', 0).transition().delay(timePerStep).transition().delay(delay).duration(animationTime).style('opacity', 1.0);\n    }\n\n    if (skinTone === 'black') {\n      d3.select(this.references.citizen.current).style('opacity', 0).transition().delay(timePerStep * 2).transition().delay(delay).duration(animationTime).style('opacity', 1.0);\n    }\n\n    if (guilty) {\n      d3.select(this.references.citizen.current).transition().delay(timePerStep * 3).transition().delay(delay).duration(animationTime * 2).style('stroke', 'red').attr('stroke-width', 3);\n    }\n\n    d3.select(this.references.citizen.current).transition().delay(duration).duration(animationTime).style('opacity', 1);\n  }\n\n  animatePhase2() {\n    const {\n      skinTone,\n      count\n    } = this.props;\n    const rest = count % 5;\n    const xCoord = skinTone === 'white' ? `${21 + rest * 2}%` : `${71 + rest * 2}%`;\n    const yCoord = `${Math.ceil(count / 5) * 2 + 15}%`;\n    this.setState({\n      xCoord,\n      yCoord\n    });\n\n    if (Math.round() >= 0.5) {}\n  }\n\n  render() {\n    const {\n      skinTone\n    } = this.props;\n    const {\n      xCoord,\n      yCoord\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"circle\", {\n      ref: this.references.citizen,\n      style: styles.circle,\n      cx: xCoord,\n      cy: yCoord,\n      r: \"10\",\n      stroke: \"black\",\n      fill: skinTone,\n      strokeWidth: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 7\n      }\n    });\n  }\n\n}","map":{"version":3,"sources":["/Users/fmeijer/Desktop/vrtnws_data/essence/simulation/frontend/src/components/Citizen/index.js"],"names":["React","d3","styles","interpolateRgbBasis","Citizen","PureComponent","constructor","props","references","citizen","createRef","state","xCoord","Math","round","random","yCoord","componentDidMount","animate","componentDidUpdate","phase","animatePhase1","animatePhase2","duration","index","skinTone","guilty","steps","timePerStep","delay","animationTime","select","current","style","transition","attr","count","rest","ceil","setState","render","circle"],"mappings":"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","sourcesContent":["import React from 'react';\nimport * as d3 from 'd3';\nimport styles from './style';\nimport { interpolateRgbBasis } from 'd3';\n\nexport default class Citizen extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.references = { citizen: React.createRef() };\n\n    this.state = {\n      xCoord : `${Math.round(Math.random() * 90) + 5}%`,\n      yCoord : `${Math.round(Math.random() * 90) + 5}%`\n    }\n  }\n\n  componentDidMount() {\n    this.animate();\n  }\n\n  componentDidUpdate() {\n    this.animate();\n  }\n\n  animate() {\n    switch (this.props.phase) {\n      case 1:\n        this.animatePhase1();\n        break;\n      case 2:\n        this.animatePhase2();\n        break;\n      default:\n        this.animatePhase1();\n    }\n  }\n\n  animatePhase1() {\n    const { duration, index, skinTone, guilty } = this.props;\n    const steps = 4;\n    const timePerStep = duration / steps;\n    const delay = (timePerStep * 0.75) * (index / 100);\n    const animationTime = timePerStep * 0.25;\n\n    if (skinTone === 'white') {\n      d3.select(this.references.citizen.current)\n        .style('opacity', 0)\n\n        .transition()\n        .delay(timePerStep)\n        .transition()\n        .delay(delay)\n        .duration(animationTime)\n        .style('opacity', 1.0);\n    }\n\n    if (skinTone === 'black') {\n      d3.select(this.references.citizen.current)\n        .style('opacity', 0)\n\n        .transition()\n        .delay(timePerStep * 2)\n        .transition()\n        .delay(delay)\n        .duration(animationTime)\n        .style('opacity', 1.0);\n    }\n\n    if (guilty) {\n      d3.select(this.references.citizen.current)\n        .transition()\n        .delay(timePerStep * 3)\n        .transition()\n        .delay(delay)\n        .duration(animationTime * 2)\n        .style('stroke', 'red')\n        .attr('stroke-width', 3);\n    }\n\n    d3.select(this.references.citizen.current)\n      .transition()\n      .delay(duration)\n      .duration(animationTime)\n      .style('opacity', 1)\n  }\n\n\n  animatePhase2() {\n      const { skinTone, count } = this.props;\n      const rest = count%5;\n      const xCoord = skinTone === 'white' ? `${21 + rest * 2}%` : `${71 + rest * 2}%`;\n      const yCoord = `${Math.ceil(count/5) * 2 + 15}%`;\n      \n      this.setState({ xCoord, yCoord})\n\n      if (Math.round() >= 0.5) {\n\n      }\n  }\n\n  render() {\n    const { skinTone } = this.props;\n    const { xCoord, yCoord } = this.state;\n    return (\n      <circle ref={this.references.citizen} style={styles.circle}\n        cx={xCoord}\n        cy={yCoord}\n        r=\"10\"\n        stroke=\"black\"\n        fill={skinTone}\n        strokeWidth=\"1\"\n      />\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}